<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ESG Dashboard - Pagra ENERGY Studio</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="esg-container">
  <!-- Header -->
  <div class="page-header">
    <h1>ESG Dashboard</h1>
    <div class="header-info">
      Wskazniki Srodowiskowe, Spoleczne i Zarzadcze | EU Taxonomy
    </div>
  </div>

  <!-- No Data State -->
  <div id="noDataState" class="no-data active">
    <div class="no-data-icon">üå±</div>
    <h3>Brak danych do analizy ESG</h3>
    <p>Wgraj dane zuzywania w module ZUZYCIE i przeprowadz analize w module PRODUKCJA PV</p>
  </div>

  <!-- Main Content Grid -->
  <div id="mainContent" class="content-grid hidden">

    <!-- Main KPI Cards -->
    <div class="stats-section">
      <h2>üéØ Kluczowe Wskazniki ESG</h2>
      <div class="stats-cards">
        <div class="stat-card esg-card">
          <div class="stat-icon">üåç</div>
          <div class="stat-content">
            <div class="stat-label">Redukcja CO2 Rocznie</div>
            <div class="stat-value" id="esgCo2ReductionYear">-</div>
            <div class="stat-unit">tCO2e/rok</div>
          </div>
        </div>
        <div class="stat-card esg-card">
          <div class="stat-icon">üå≥</div>
          <div class="stat-content">
            <div class="stat-label">Redukcja CO2 Lifetime</div>
            <div class="stat-value" id="esgCo2ReductionLifetime">-</div>
            <div class="stat-unit">tCO2e (25 lat)</div>
          </div>
        </div>
        <div class="stat-card esg-card">
          <div class="stat-icon">‚òÄÔ∏è</div>
          <div class="stat-content">
            <div class="stat-label">Udzial OZE</div>
            <div class="stat-value" id="esgShareRes">-</div>
            <div class="stat-unit">% energii z PV</div>
          </div>
        </div>
        <div class="stat-card esg-card">
          <div class="stat-icon">‚è±Ô∏è</div>
          <div class="stat-content">
            <div class="stat-label">Carbon Payback</div>
            <div class="stat-value" id="esgCarbonPayback">-</div>
            <div class="stat-unit">lat</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Methodology Note -->
    <div class="methodology-note">
      <div class="note-icon">üìã</div>
      <div class="note-content">
        <strong>Metodyka:</strong> Redukcja CO2 liczona na podstawie <em>zmniejszenia importu z sieci</em> (autokonsumpcja).
        Tylko energia zuzyta na miejscu zastepuje import z sieci i redukuje emisje Scope 2.
        Eksport do sieci moze unikac emisji w systemie energetycznym, ale nie jest wliczany do Scope 2 zakladu.
      </div>
    </div>

    <!-- Scope 2 Emissions Section -->
    <div class="details-section">
      <h2>üìä Emisje Scope 2 (Location-Based)</h2>
      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label">CO2 przed instalacja PV</span>
          <span class="detail-value" id="esgCo2Before">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">CO2 po instalacji PV</span>
          <span class="detail-value" id="esgCo2After">-</span>
        </div>
        <div class="detail-item highlight">
          <span class="detail-label">Redukcja emisji</span>
          <span class="detail-value positive" id="esgCo2ReductionPct">-</span>
        </div>
      </div>
    </div>

    <!-- CO2 Breakdown Section -->
    <div class="details-section breakdown-section">
      <h2>üîç Rozbicie Uniknietych Emisji</h2>
      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label">Autokonsumpcja (redukcja importu)</span>
          <span class="detail-value" id="esgSelfConsumptionKwh">-</span>
        </div>
        <div class="detail-item highlight">
          <span class="detail-label">CO2 unikniete (Scope 2)</span>
          <span class="detail-value positive" id="esgCo2SelfConsumption">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Eksport do sieci</span>
          <span class="detail-value" id="esgGridExportKwh">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">CO2 unikniete (poza Scope 2)</span>
          <span class="detail-value" id="esgCo2Export">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Suma - cala produkcja PV</span>
          <span class="detail-value" id="esgTotalProductionKwh">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">CO2 unikniete (razem)</span>
          <span class="detail-value" id="esgCo2ProductionBased">-</span>
        </div>
      </div>
    </div>

    <!-- CO2 Savings Summary Section -->
    <div class="stats-section co2-savings-section">
      <h2>üå≥ Oszczednosc CO2 dla Srodowiska</h2>
      <div class="stats-cards">
        <div class="stat-card esg-card savings-card">
          <div class="stat-icon">üè≠</div>
          <div class="stat-content">
            <div class="stat-label">Oszczednosc CO2 Rocznie</div>
            <div class="stat-value" id="esgCo2SavingsYearTons">-</div>
            <div class="stat-unit">ton CO2/rok</div>
          </div>
        </div>
        <div class="stat-card esg-card savings-card">
          <div class="stat-icon">üå≤</div>
          <div class="stat-content">
            <div class="stat-label">Oszczednosc CO2 Lifetime</div>
            <div class="stat-value" id="esgCo2SavingsLifetimeTons">-</div>
            <div class="stat-unit">ton CO2 (25 lat)</div>
          </div>
        </div>
        <div class="stat-card esg-card savings-card">
          <div class="stat-icon">üöó</div>
          <div class="stat-content">
            <div class="stat-label">Ekwiwalent samochodowy</div>
            <div class="stat-value" id="esgCarEquivalent">-</div>
            <div class="stat-unit">km rocznie</div>
          </div>
        </div>
        <div class="stat-card esg-card savings-card">
          <div class="stat-icon">üå≥</div>
          <div class="stat-content">
            <div class="stat-label">Ekwiwalent drzew</div>
            <div class="stat-value" id="esgTreeEquivalent">-</div>
            <div class="stat-unit">drzew/rok</div>
          </div>
        </div>
      </div>
      <div class="carbon-info-note" style="margin-top: 16px;">
        <span class="info-icon">‚ÑπÔ∏è</span>
        <span>Obliczenia na podstawie rzeczywistej produkcji PV i faktora emisji sieci PL (658 gCO2/kWh).
        Ekwiwalent samochodowy: 120 gCO2/km (sredni samochod osobowy).
        Ekwiwalent drzew: 22 kg CO2/rok absorpcji przez drzewo lisciaste.</span>
      </div>
    </div>

    <!-- Carbon Clock - Animated Real-time CO2 Savings -->
    <div class="stats-section carbon-clock-section" id="carbonClockSection">
      <h2>‚è±Ô∏è Carbon Clock - Oszczednosci w Czasie Rzeczywistym</h2>
      <div class="carbon-clock-container">
        <!-- Main Clock Display -->
        <div class="carbon-clock-main">
          <div class="clock-circle">
            <svg class="clock-ring" viewBox="0 0 120 120">
              <circle class="clock-ring-bg" cx="60" cy="60" r="54" />
              <circle class="clock-ring-progress" id="clockRingProgress" cx="60" cy="60" r="54" />
            </svg>
            <div class="clock-content">
              <div class="clock-value" id="clockCo2Value">0,00</div>
              <div class="clock-unit">kg CO2</div>
              <div class="clock-label">zaoszczedzone dzis</div>
            </div>
          </div>
          <div class="clock-time-display">
            <span id="clockCurrentTime">--:--:--</span>
          </div>
          <div class="clock-date-display">
            <span id="clockCurrentDate">Dzie≈Ñ 0</span>
          </div>
        </div>

        <!-- Animated Counters -->
        <div class="carbon-counters">
          <div class="counter-card trees-counter">
            <div class="counter-icon">üå≥</div>
            <div class="counter-content">
              <div class="counter-label">Ekwiwalent drzew</div>
              <div class="counter-value">
                <span class="counter-number" id="clockTreeCount">0</span>
                <span class="counter-fraction" id="clockTreeFraction">,0</span>
              </div>
              <div class="counter-sublabel">drzew pracuje dla Ciebie</div>
              <div class="counter-progress-bar">
                <div class="counter-progress" id="clockTreeProgress"></div>
              </div>
            </div>
          </div>

          <div class="counter-card car-counter">
            <div class="counter-icon">üöó</div>
            <div class="counter-content">
              <div class="counter-label">Kilometrow bez emisji</div>
              <div class="counter-value">
                <span class="counter-number" id="clockCarKm">0</span>
                <span class="counter-unit-small">km</span>
              </div>
              <div class="counter-sublabel">samochodem osobowym</div>
              <div class="counter-progress-bar">
                <div class="counter-progress car-progress" id="clockCarProgress"></div>
              </div>
            </div>
          </div>

          <div class="counter-card co2-counter">
            <div class="counter-icon">üí®</div>
            <div class="counter-content">
              <div class="counter-label">CO2 rok biezacy</div>
              <div class="counter-value">
                <span class="counter-number" id="clockYearCo2">0,0</span>
                <span class="counter-unit-small">ton</span>
              </div>
              <div class="counter-sublabel">od poczatku roku</div>
              <div class="counter-progress-bar">
                <div class="counter-progress year-progress" id="clockYearProgress"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Clock Controls -->
      <div class="clock-controls">
        <button class="clock-btn" id="clockPlayBtn" onclick="toggleCarbonClock()">
          <span id="clockPlayIcon">‚ñ∂Ô∏è</span>
          <span id="clockPlayText">Start</span>
        </button>
        <div class="clock-speed-control">
          <label>Symulacja:</label>
          <select id="clockSpeedSelect" onchange="updateClockSpeed()">
            <option value="realtime">Czas rzeczywisty</option>
            <option value="minute">1 min = 1 h</option>
            <option value="fast" selected>1 min = 1 dzien</option>
            <option value="ultrafast">1 min = 1 tydzien</option>
            <option value="superfast">1 min = 1 miesiac</option>
            <option value="warp">1 min = 1 rok</option>
          </select>
        </div>
        <button class="clock-btn clock-btn-secondary" onclick="resetCarbonClock()">
          üîÑ Reset
        </button>
      </div>

      <div class="carbon-info-note" style="margin-top: 16px;">
        <span class="info-icon">üí°</span>
        <span>Carbon Clock pokazuje w czasie rzeczywistym ile CO2 oszczedza Twoja instalacja PV.
        Wybierz tryb symulacji aby przyspieszyc wizualizacje i zobaczyc oszczednosci w skali dnia, miesiaca lub roku.</span>
      </div>
    </div>

    <!-- Embodied Carbon Section -->
    <div class="details-section">
      <h2>üè≠ Embodied Carbon (LCA)</h2>
      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label">Technologia PV</span>
          <span class="detail-value" id="esgPvTechnology">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Embodied Carbon calkowity</span>
          <span class="detail-value" id="esgEmbodiedCarbon">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Embodied Carbon / kWp</span>
          <span class="detail-value" id="esgEmbodiedPerKwp">-</span>
        </div>
        <div class="detail-item highlight">
          <span class="detail-label">Net CO2 (25 lat)</span>
          <span class="detail-value positive" id="esgNetCo2">-</span>
        </div>
      </div>
    </div>

    <!-- EU Taxonomy Section -->
    <div class="stats-section taxonomy-section">
      <h2>üá™üá∫ EU Taxonomy Compliance</h2>
      <div class="taxonomy-content">
        <div class="taxonomy-badge" id="esgTaxonomyBadge">
          <div class="badge-icon">‚úì</div>
          <div class="badge-text">
            <div class="badge-title">Zgodne z Taxonomy 4.1</div>
            <div class="badge-subtitle">Wytwarzanie energii ze zr√≥del odnawialnych</div>
          </div>
        </div>
        <div class="taxonomy-details">
          <div class="taxonomy-item">
            <span class="taxonomy-label">Cel klimatyczny</span>
            <span class="taxonomy-value">Lagodzenie zmian klimatu</span>
          </div>
          <div class="taxonomy-item">
            <span class="taxonomy-label">Kryteria DNSH</span>
            <span class="taxonomy-value">Spelnia warunki</span>
          </div>
          <div class="taxonomy-item">
            <span class="taxonomy-label">Minimalne gwarancje</span>
            <span class="taxonomy-value">Do weryfikacji</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Carbon Footprint Comparison Section -->
    <div class="details-section carbon-footprint-section">
      <h2>üåç Carbon Footprint - Por√≥wnanie Emisyjno≈õci</h2>
      <div class="carbon-comparison-container">
        <div class="carbon-chart-wrapper">
          <canvas id="carbonFootprintChart" height="280"></canvas>
        </div>
        <div class="carbon-legend">
          <div class="carbon-legend-item">
            <span class="carbon-dot grid"></span>
            <div class="carbon-legend-text">
              <strong>Sieƒá elektroenergetyczna (PL)</strong>
              <span id="carbonGridValue">658 gCO2e/kWh</span>
            </div>
          </div>
          <div class="carbon-legend-item">
            <span class="carbon-dot pv"></span>
            <div class="carbon-legend-text">
              <strong>Instalacja PV (LCA)</strong>
              <span id="carbonPvValue">~40 gCO2e/kWh</span>
            </div>
          </div>
          <div class="carbon-legend-item highlight">
            <span class="carbon-dot savings"></span>
            <div class="carbon-legend-text">
              <strong>Redukcja emisji</strong>
              <span id="carbonSavingsValue">-94%</span>
            </div>
          </div>
        </div>
      </div>
      <div class="carbon-info-note">
        <span class="info-icon">‚ÑπÔ∏è</span>
        <span>Dane dla Polski: EF sieci wg KOBiZE 2023. LCA dla PV obejmuje produkcjƒô, transport i instalacjƒô modu≈Ç√≥w (IPCC 2021).</span>
      </div>
    </div>

    <!-- Technical Parameters Section -->
    <div class="details-section">
      <h2>‚öôÔ∏è Parametry Techniczne ESG</h2>
      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label">EF_grid (Polska)</span>
          <span class="detail-value" id="esgEfGrid">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Zr√≥dlo EF</span>
          <span class="detail-value" id="esgEfSource">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Zr√≥dlo Embodied Carbon</span>
          <span class="detail-value" id="esgEmbodiedSource">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Moc instalacji PV</span>
          <span class="detail-value" id="esgPvCapacity">-</span>
        </div>
      </div>
    </div>

    <!-- Export Section -->
    <div class="actions-section">
      <button class="btn" onclick="exportESGReport()">üìä Eksportuj Raport ESG</button>
      <button class="btn btn-secondary" onclick="refreshESGData()">üîÑ Odswie≈º Dane</button>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="esg.js"></script>
</body>
</html>
