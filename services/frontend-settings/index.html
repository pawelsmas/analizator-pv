<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ustawienia Systemu</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="settings-container">
  <div class="settings-header">
    <h1>‚öôÔ∏è USTAWIENIA SYSTEMU</h1>
    <p>Centralna konfiguracja wszystkich parametr√≥w analizy PV</p>
  </div>

  <div class="settings-content">
    <!-- Energy Tariff Section -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">üí°</span>
        <h2>Taryfa Energetyczna</h2>
        <span class="section-info">Sk≈Çadniki ceny energii [PLN/MWh]</span>
      </div>
      <div class="settings-grid">
        <div class="setting-item">
          <label>Energia czynna</label>
          <input type="number" id="energyActive" value="550" step="10">
          <span class="setting-hint">Podstawowa stawka za energiƒô</span>
        </div>
        <div class="setting-item">
          <label>Dystrybucja</label>
          <input type="number" id="distribution" value="200" step="10">
          <span class="setting-hint">Op≈Çata dystrybucyjna</span>
        </div>
        <div class="setting-item">
          <label>Op≈Çata jako≈õciowa</label>
          <input type="number" id="qualityFee" value="10" step="1">
          <span class="setting-hint">Za jako≈õƒá energii</span>
        </div>
        <div class="setting-item">
          <label>Op≈Çata OZE</label>
          <input type="number" id="ozeFee" value="7" step="1">
          <span class="setting-hint">Wsparcie OZE</span>
        </div>
        <div class="setting-item">
          <label>Op≈Çata kogeneracyjna</label>
          <input type="number" id="cogenerationFee" value="10" step="1">
          <span class="setting-hint">Wsparcie kogeneracji</span>
        </div>
        <div class="setting-item">
          <label>Op≈Çata mocowa (7-21)</label>
          <input type="number" id="capacityFee" value="219" step="10">
          <span class="setting-hint">Godziny szczytu</span>
        </div>
        <div class="setting-item">
          <label>Akcyza</label>
          <input type="number" id="exciseTax" value="5" step="1">
          <span class="setting-hint">Podatek akcyzowy</span>
        </div>
        <div class="setting-item highlight">
          <label>SUMA</label>
          <input type="number" id="totalEnergyPrice" value="1001" readonly>
          <span class="setting-hint">Ca≈Çkowita cena energii</span>
        </div>
      </div>
    </div>

    <!-- CAPEX Tiers Section -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">üí∞</span>
        <h2>Przedzia≈Çy CAPEX</h2>
        <span class="section-info">Koszt inwestycji wg wielko≈õci instalacji [PLN/kWp]</span>
      </div>
      <div class="settings-grid capex-grid">
        <div class="setting-item">
          <label>150 - 500 kWp</label>
          <input type="number" id="capex1" value="4200" step="50">
        </div>
        <div class="setting-item">
          <label>501 - 1 000 kWp</label>
          <input type="number" id="capex2" value="3800" step="50">
        </div>
        <div class="setting-item">
          <label>1 001 - 2 500 kWp</label>
          <input type="number" id="capex3" value="3500" step="50">
        </div>
        <div class="setting-item">
          <label>2 501 - 5 000 kWp</label>
          <input type="number" id="capex4" value="3200" step="50">
        </div>
        <div class="setting-item">
          <label>5 001 - 10 000 kWp</label>
          <input type="number" id="capex5" value="3000" step="50">
        </div>
        <div class="setting-item">
          <label>10 001 - 15 000 kWp</label>
          <input type="number" id="capex6" value="2850" step="50">
        </div>
        <div class="setting-item full-width">
          <label>15 001 - 50 000 kWp</label>
          <input type="number" id="capex7" value="2700" step="50">
        </div>
      </div>
    </div>

    <!-- OPEX Section -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">üîß</span>
        <h2>Koszty Operacyjne (OPEX)</h2>
        <span class="section-info">Roczne koszty eksploatacji</span>
      </div>
      <div class="settings-grid">
        <div class="setting-item">
          <label>OPEX [PLN/kWp/rok]</label>
          <input type="number" id="opexPerKwp" value="15" step="1">
          <span class="setting-hint">Koszty serwisu i utrzymania</span>
        </div>
        <div class="setting-item">
          <label>O&M EaaS [PLN/kWp/rok]</label>
          <input type="number" id="eaasOM" value="24" step="1">
          <span class="setting-hint">Koszty O&M w modelu EaaS</span>
        </div>
        <div class="setting-item">
          <label>Ubezpieczenie [% CAPEX/rok]</label>
          <input type="number" id="insuranceRate" value="0.3" step="0.1" min="0" max="2">
          <span class="setting-hint">Stawka ubezpieczenia</span>
        </div>
        <div class="setting-item">
          <label>Najem powierzchni [PLN/kWp/rok]</label>
          <input type="number" id="landLeasePerKwp" value="0" step="1" min="0">
          <span class="setting-hint">Koszt dzier≈ºawy gruntu</span>
        </div>
      </div>
    </div>

    <!-- Financial Parameters Section -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">üìä</span>
        <h2>Parametry Finansowe</h2>
        <span class="section-info">Stopy, okresy i wska≈∫niki</span>
      </div>
      <div class="settings-grid">
        <div class="setting-item">
          <label>Stopa dyskontowa [%]</label>
          <input type="number" id="discountRate" value="7" step="0.5" min="0" max="20">
          <span class="setting-hint">Do obliczenia NPV</span>
        </div>
        <div class="setting-item">
          <label>Degradacja PV [%/rok]</label>
          <input type="number" id="degradationRate" value="0.5" step="0.1" min="0" max="2">
          <span class="setting-hint">Spadek wydajno≈õci</span>
        </div>
        <div class="setting-item">
          <label>Okres analizy [lat]</label>
          <input type="number" id="analysisPeriod" value="25" step="1" min="10" max="30">
          <span class="setting-hint">Horyzont czasowy</span>
        </div>
        <div class="setting-item">
          <label>Inflacja [%/rok]</label>
          <input type="number" id="inflationRate" value="2.5" step="0.5" min="0" max="10">
          <span class="setting-hint">Wzrost cen energii</span>
        </div>
      </div>

      <!-- IRR Calculation Mode -->
      <div style="margin-top:20px;padding:16px;background:#fff8e1;border-radius:8px;border-left:4px solid #ffc107">
        <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px">
          <input type="checkbox" id="useInflation" style="width:20px;height:20px;cursor:pointer">
          <label for="useInflation" style="font-weight:600;color:#f57c00;cursor:pointer;margin:0">
            Uwzglƒôdniaj inflacjƒô w obliczeniu IRR (tryb nominalny)
          </label>
        </div>
        <div style="font-size:12px;color:#795548;margin-left:32px">
          <strong>Wy≈ÇƒÖczone (domy≈õlnie):</strong> IRR realny - sta≈Çe ceny energii i OPEX przez ca≈Çy okres analizy<br>
          <strong>W≈ÇƒÖczone:</strong> IRR nominalny - ceny energii, OPEX i taryfy feed-in indeksowane o inflacjƒô rocznie
        </div>
      </div>
    </div>

    <!-- EaaS Parameters Section (Password Protected) -->
    <div class="settings-section" id="eaasPasswordSection">
      <div class="section-header">
        <span class="section-icon">üîí</span>
        <h2>Parametry EaaS (Energy-as-a-Service)</h2>
        <span class="section-info">Sekcja chroniona has≈Çem</span>
      </div>
      <div style="text-align:center;padding:40px">
        <button onclick="unlockEaasSection()" style="padding:12px 24px;background:#4caf50;color:white;border:none;border-radius:6px;font-size:14px;cursor:pointer;font-weight:600">
          üîì Poka≈º parametry EaaS
        </button>
      </div>
    </div>

    <!-- EaaS Parameters Section (Hidden by default) -->
    <div class="settings-section" id="eaasParamsSection" style="display:none">
      <div class="section-header">
        <span class="section-icon">üìã</span>
        <h2>Parametry EaaS (Energy-as-a-Service)</h2>
        <span class="section-info">Model subskrypcyjny - kalkulacja abonamentu na podstawie docelowego IRR</span>
      </div>

      <div style="margin-bottom:20px;padding:16px;background:#e8f5e9;border-radius:8px;border-left:4px solid #4caf50">
        <div style="font-size:13px;font-weight:600;color:#2e7d32;margin-bottom:8px">üí° Jak dzia≈Ça kalkulacja EaaS?</div>
        <div style="font-size:12px;color:#1b5e20;line-height:1.6">
          Abonament EaaS jest obliczany automatycznie aby zapewniƒá ESCO docelowƒÖ stopƒô zwrotu (IRR).<br>
          <strong>Wz√≥r:</strong> Abonament = f(CAPEX, OPEX, Ubezpieczenie, Podatek, IRR docelowe, Okres umowy)<br>
          System obliczy miesiƒôcznƒÖ ratƒô kt√≥ra po uwzglƒôdnieniu wszystkich koszt√≥w operacyjnych zapewni za≈Ço≈ºone IRR.
        </div>
      </div>

      <div class="settings-grid">
        <div class="setting-item">
          <label>Waluta kontraktu</label>
          <select id="eaasCurrency" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px">
            <option value="PLN">PLN (Z≈Çoty Polski)</option>
            <option value="EUR">EUR (Euro)</option>
          </select>
          <span class="setting-hint">Waluta rozlicze≈Ñ EaaS</span>
        </div>

        <div class="setting-item">
          <label>Okres umowy EaaS [lat]</label>
          <input type="number" id="eaasDuration" value="10" step="1" min="5" max="25">
          <span class="setting-hint">D≈Çugo≈õƒá kontraktu subskrypcyjnego</span>
        </div>

        <div class="setting-item">
          <label>Typ abonamentu</label>
          <select id="eaasIndexation" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px">
            <option value="fixed">Fixed (sta≈Ça rata)</option>
            <option value="cpi">CPI (indeksacja inflacjƒÖ)</option>
          </select>
          <span class="setting-hint">Czy abonament ro≈õnie z inflacjƒÖ</span>
        </div>

        <div class="setting-item">
          <label>Docelowe IRR dla ESCO - PLN [%]</label>
          <input type="number" id="eaasTargetIrrPln" value="12.0" step="0.5" min="5" max="25">
          <span class="setting-hint">Wymagana stopa zwrotu dla kontrakt√≥w w PLN</span>
        </div>

        <div class="setting-item">
          <label>Docelowe IRR dla ESCO - EUR [%]</label>
          <input type="number" id="eaasTargetIrrEur" value="10.0" step="0.5" min="5" max="25">
          <span class="setting-hint">Wymagana stopa zwrotu dla kontrakt√≥w w EUR</span>
        </div>

        <div class="setting-item">
          <label>CPI PLN [%/rok]</label>
          <input type="number" id="cpiPln" value="2.5" step="0.1" min="0" max="10">
          <span class="setting-hint">Roczna inflacja dla PLN (do indeksacji CPI)</span>
        </div>

        <div class="setting-item">
          <label>CPI EUR [%/rok]</label>
          <input type="number" id="cpiEur" value="2.0" step="0.1" min="0" max="10">
          <span class="setting-hint">Roczna inflacja dla EUR (do indeksacji CPI)</span>
        </div>

        <div class="setting-item">
          <label>Kurs PLN/EUR</label>
          <input type="number" id="fxPlnEur" value="4.5" step="0.01" min="3" max="6">
          <span class="setting-hint">Kurs wymiany do przelicze≈Ñ EUR</span>
        </div>
      </div>

      <div style="margin-top:16px;padding:12px;background:#fff3e0;border-radius:8px;border-left:3px solid #ff9800">
        <div style="font-size:12px;color:#e65100">
          <strong>‚ÑπÔ∏è Koszty uwzglƒôdniane w kalkulacji IRR:</strong><br>
          ‚Ä¢ CAPEX (z przedzia≈Ç√≥w dostosowanych do mocy instalacji)<br>
          ‚Ä¢ OPEX (koszty operacyjne z sekcji NPV)<br>
          ‚Ä¢ Ubezpieczenie (je≈õli skonfigurowane)<br>
          ‚Ä¢ Podatek od nieruchomo≈õci (je≈õli skonfigurowany)<br>
          ‚Ä¢ Degradacja produkcji w czasie<br><br>
          <strong>Wynik:</strong> Roczny abonament kt√≥ry zapewni ESCO za≈Ço≈ºony IRR przy danej wielko≈õci instalacji
        </div>
      </div>
    </div>

    <!-- Weather Data Source -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">üå§Ô∏è</span>
        <h2>≈πr√≥d≈Ço Danych Meteorologicznych</h2>
        <span class="section-info">Wybierz ≈∫r√≥d≈Ço danych do symulacji produkcji PV</span>
      </div>

      <div class="setting-item" style="max-width:600px">
        <label>≈πr√≥d≈Ço danych pogodowych</label>
        <select id="weatherDataSource" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px">
          <option value="pvgis">PVGIS (Rekomendowane) - Dane TMY z EU</option>
          <option value="clearsky">Clearsky Model - Symulacja bezc\u200bhmurnego nieba</option>
        </select>
        <span class="setting-hint">PVGIS: Rzeczywiste dane meteorologiczne dla Europy (dok≈Çadniejsze). Clearsky: Model teoretyczny (szybszy, mniej dok≈Çadny)</span>
      </div>

      <div style="margin-top:16px;padding:12px;background:#e3f2fd;border-radius:8px;border-left:3px solid #2196f3">
        <div style="font-size:12px;color:#1565c0">
          <strong>‚ÑπÔ∏è Informacja:</strong><br>
          <strong>PVGIS (Photovoltaic Geographical Information System)</strong> - Darmowa us≈Çuga EU dostarczajƒÖca dane TMY (Typical Meteorological Year) z rozdzielczo≈õciƒÖ ~5km. Zawiera rzeczywiste dane o nas≈Çonecznieniu, temperaturze i wietrze. Poprawia dok≈Çadno≈õƒá prognoz o 15-25%.<br><br>
          <strong>Clearsky Model</strong> - Teoretyczny model zak≈ÇadajƒÖcy bezchmurne niebo. Szybszy, ale mniej dok≈Çadny, szczeg√≥lnie w regionach z czƒôstym zachmurzeniem.
        </div>
      </div>
    </div>

    <!-- PV Installation Defaults - per type -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">‚òÄÔ∏è</span>
        <h2>Parametry Instalacji PV</h2>
        <span class="setting-info">Uzysk i szeroko≈õƒá geograficzna dla ka≈ºdego typu</span>
      </div>

      <!-- Ground South -->
      <div class="pv-type-section" style="margin-bottom:20px;padding:15px;background:#e8f5e9;border-radius:8px;border-left:4px solid #4caf50">
        <div style="font-weight:600;color:#2e7d32;margin-bottom:10px">üåç Grunt Po≈Çudnie</div>
        <div class="settings-grid">
          <div class="setting-item">
            <label>Uzysk [kWh/kWp/rok]</label>
            <input type="number" id="pvYield_ground_s" value="1050" step="10">
          </div>
          <div class="setting-item">
            <label>Szeroko≈õƒá geogr. [¬∞]</label>
            <input type="number" id="latitude_ground_s" value="52.0" step="0.1" min="49" max="55">
          </div>
          <div class="setting-item">
            <label>KƒÖt nachylenia [¬∞]</label>
            <input type="number" id="tilt_ground_s" value="0" step="1" min="0" max="90">
            <span class="setting-hint">0 = auto (szeroko≈õƒá geogr.)</span>
          </div>
          <div class="setting-item">
            <label>Azymut [¬∞]</label>
            <input type="number" id="azimuth_ground_s" value="180" step="5" min="0" max="360">
            <span class="setting-hint">180¬∞ = Po≈Çudnie</span>
          </div>
        </div>
      </div>

      <!-- Roof East-West -->
      <div class="pv-type-section" style="margin-bottom:20px;padding:15px;background:#e3f2fd;border-radius:8px;border-left:4px solid #2196f3">
        <div style="font-weight:600;color:#1565c0;margin-bottom:10px">üè† Dach Wsch√≥d-Zach√≥d</div>
        <div class="settings-grid">
          <div class="setting-item">
            <label>Uzysk [kWh/kWp/rok]</label>
            <input type="number" id="pvYield_roof_ew" value="950" step="10">
          </div>
          <div class="setting-item">
            <label>Szeroko≈õƒá geogr. [¬∞]</label>
            <input type="number" id="latitude_roof_ew" value="52.0" step="0.1" min="49" max="55">
          </div>
          <div class="setting-item">
            <label>KƒÖt nachylenia [¬∞]</label>
            <input type="number" id="tilt_roof_ew" value="10" step="1" min="0" max="90">
            <span class="setting-hint">Niski kƒÖt dla E-W</span>
          </div>
          <div class="setting-item">
            <label>Azymut E/W [¬∞]</label>
            <input type="number" id="azimuth_roof_ew" value="90" step="5" min="0" max="360">
            <span class="setting-hint">90¬∞=E, 270¬∞=W</span>
          </div>
        </div>
      </div>

      <!-- Ground East-West -->
      <div class="pv-type-section" style="padding:15px;background:#fff3e0;border-radius:8px;border-left:4px solid #ff9800">
        <div style="font-weight:600;color:#e65100;margin-bottom:10px">üåç Grunt Wsch√≥d-Zach√≥d</div>
        <div class="settings-grid">
          <div class="setting-item">
            <label>Uzysk [kWh/kWp/rok]</label>
            <input type="number" id="pvYield_ground_ew" value="980" step="10">
          </div>
          <div class="setting-item">
            <label>Szeroko≈õƒá geogr. [¬∞]</label>
            <input type="number" id="latitude_ground_ew" value="52.0" step="0.1" min="49" max="55">
          </div>
          <div class="setting-item">
            <label>KƒÖt nachylenia [¬∞]</label>
            <input type="number" id="tilt_ground_ew" value="15" step="1" min="0" max="90">
            <span class="setting-hint">KƒÖt dla E-W grunt</span>
          </div>
          <div class="setting-item">
            <label>Azymut E/W [¬∞]</label>
            <input type="number" id="azimuth_ground_ew" value="90" step="5" min="0" max="360">
            <span class="setting-hint">90¬∞=E, 270¬∞=W</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Environmental Parameters -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">üåç</span>
        <h2>Parametry ≈örodowiskowe (Zaawansowane)</h2>
        <span class="section-info">Dodatkowe parametry wp≈ÇywajƒÖce na dok≈Çadno≈õƒá symulacji</span>
      </div>

      <div class="settings-grid">
        <div class="setting-item">
          <label>Wysoko≈õƒá npm [m]</label>
          <input type="number" id="altitude" value="100" step="10" min="0" max="2500">
          <span class="setting-hint">Wysoko≈õƒá instalacji nad poziomem morza</span>
        </div>
        <div class="setting-item">
          <label>Albedo (reflektancja gruntu)</label>
          <input type="number" id="albedo" value="0.2" step="0.05" min="0.1" max="0.9">
          <span class="setting-hint">0.2=trawa, 0.3=beton, 0.8=≈õnieg</span>
        </div>
        <div class="setting-item">
          <label>Straty przez zabrudzenie [%]</label>
          <input type="number" id="soilingLoss" value="2" step="0.5" min="0" max="10">
          <span class="setting-hint">Typowo 2-3% dla Europy</span>
        </div>
      </div>

      <div style="margin-top:16px;padding:12px;background:#fff3e0;border-radius:8px;border-left:3px solid #ff9800">
        <div style="font-size:12px;color:#e65100">
          <strong>üí° Wyja≈õnienia:</strong><br>
          <strong>Wysoko≈õƒá npm:</strong> Wy≈ºsza wysoko≈õƒá = wy≈ºsza irradiancja (cie≈Ñsza atmosfera)<br>
          <strong>Albedo:</strong> Reflektancja gruntu wp≈Çywa na odbite promieniowanie. Wy≈ºsze albedo = wiƒôcej odbicia = wy≈ºsza produkcja<br>
          <strong>Soiling loss:</strong> Straty przez zabrudzenie paneli (kurz, py≈Ç, li≈õcie). Zale≈ºy od regionu i czƒôstotliwo≈õci czyszczenia
        </div>
      </div>
    </div>

    <!-- DC/AC Ratio Tiers -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">‚ö°</span>
        <h2>DC/AC Ratio wg wielko≈õci instalacji</h2>
        <span class="section-info">Wsp√≥≈Çczynnik DC/AC dla ka≈ºdego przedzia≈Çu mocy i typu monta≈ºu</span>
      </div>

      <div style="margin-bottom:16px;padding:12px;background:#f5f5f5;border-radius:8px">
        <label style="font-weight:600;margin-bottom:8px;display:block">Tryb doboru DC/AC Ratio</label>
        <select id="dcacMode" style="width:100%;max-width:400px;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px">
          <option value="manual">Rƒôczne przedzia≈Çy (z tabeli poni≈ºej)</option>
          <option value="auto">Automatyczny dob√≥r (w przysz≈Ço≈õci)</option>
        </select>
        <span style="display:block;margin-top:8px;font-size:12px;color:#666">W trybie automatycznym u≈ºyte DC/AC ratio bƒôdzie pokazane w wynikach analizy</span>
      </div>

      <table class="dcac-table" style="width:100%;border-collapse:collapse;margin-top:10px">
        <thead>
          <tr style="background:#f5f5f5">
            <th style="padding:10px;text-align:left;border:1px solid #ddd">Moc [kWp]</th>
            <th style="padding:10px;text-align:center;border:1px solid #ddd;background:#e8f5e9">Grunt P≈Çd</th>
            <th style="padding:10px;text-align:center;border:1px solid #ddd;background:#e3f2fd">Dach E-W</th>
            <th style="padding:10px;text-align:center;border:1px solid #ddd;background:#fff3e0">Grunt E-W</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding:8px;border:1px solid #ddd">150 - 500</td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_s_1" value="1.15" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_roof_ew_1" value="1.20" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_ew_1" value="1.25" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
          </tr>
          <tr>
            <td style="padding:8px;border:1px solid #ddd">501 - 1 000</td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_s_2" value="1.20" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_roof_ew_2" value="1.25" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_ew_2" value="1.30" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
          </tr>
          <tr>
            <td style="padding:8px;border:1px solid #ddd">1 001 - 2 500</td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_s_3" value="1.25" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_roof_ew_3" value="1.30" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_ew_3" value="1.35" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
          </tr>
          <tr>
            <td style="padding:8px;border:1px solid #ddd">2 501 - 5 000</td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_s_4" value="1.30" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_roof_ew_4" value="1.35" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_ew_4" value="1.40" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
          </tr>
          <tr>
            <td style="padding:8px;border:1px solid #ddd">5 001 - 10 000</td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_s_5" value="1.30" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_roof_ew_5" value="1.35" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_ew_5" value="1.40" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
          </tr>
          <tr>
            <td style="padding:8px;border:1px solid #ddd">10 001 - 15 000</td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_s_6" value="1.35" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_roof_ew_6" value="1.40" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_ew_6" value="1.45" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
          </tr>
          <tr>
            <td style="padding:8px;border:1px solid #ddd">15 001 - 50 000</td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_s_7" value="1.40" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_roof_ew_7" value="1.45" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
            <td style="padding:4px;border:1px solid #ddd"><input type="number" id="dcac_ground_ew_7" value="1.50" step="0.05" min="1" max="2" style="width:70px;text-align:center"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Analysis Range -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">üîç</span>
        <h2>Zakres Analizy</h2>
        <span class="section-info">Przedzia≈Çy mocy do analizy</span>
      </div>
      <div class="settings-grid">
        <div class="setting-item">
          <label>Moc minimalna [kWp]</label>
          <input type="number" id="capMin" value="1000" step="100">
        </div>
        <div class="setting-item">
          <label>Moc maksymalna [kWp]</label>
          <input type="number" id="capMax" value="50000" step="1000">
        </div>
        <div class="setting-item">
          <label>Krok [kWp]</label>
          <input type="number" id="capStep" value="500" step="100">
        </div>
      </div>
    </div>

    <!-- Optimization Thresholds -->
    <div class="settings-section">
      <div class="section-header">
        <span class="section-icon">üéØ</span>
        <h2>Progi Autokonsumpcji</h2>
        <span class="section-info">Warianty A, B, C, D [%]</span>
      </div>
      <div class="settings-grid threshold-grid">
        <div class="setting-item threshold-a">
          <label>Wariant A</label>
          <input type="number" id="thrA" value="95" min="50" max="100">
          <span class="setting-hint">Najwy≈ºsza autokonsumpcja</span>
        </div>
        <div class="setting-item threshold-b">
          <label>Wariant B</label>
          <input type="number" id="thrB" value="90" min="50" max="100">
        </div>
        <div class="setting-item threshold-c">
          <label>Wariant C</label>
          <input type="number" id="thrC" value="85" min="50" max="100">
        </div>
        <div class="setting-item threshold-d">
          <label>Wariant D</label>
          <input type="number" id="thrD" value="80" min="50" max="100">
          <span class="setting-hint">Najni≈ºsza autokonsumpcja</span>
        </div>
      </div>
    </div>

  </div>

  <div class="settings-footer">
    <button class="btn btn-primary" onclick="saveAllSettings()">üíæ ZAPISZ USTAWIENIA</button>
    <button class="btn btn-secondary" onclick="resetToDefaults()">üîÑ PRZYWR√ìƒÜ DOMY≈öLNE</button>
    <button class="btn btn-export" onclick="exportSettings()">üì• EKSPORT</button>
    <button class="btn btn-import" onclick="importSettings()">üì§ IMPORT</button>
    <input type="file" id="importFile" accept=".json" style="display:none" onchange="handleImport(event)">
  </div>

  <div id="saveStatus" class="save-status"></div>
</div>

<script>
// Password protection for EaaS section
function unlockEaasSection() {
  const password = prompt('Wprowad≈∫ has≈Ço aby odblokowaƒá parametry EaaS:');

  // Check password (change 'admin123' to your desired password)
  if (password === 'admin123') {
    document.getElementById('eaasPasswordSection').style.display = 'none';
    document.getElementById('eaasParamsSection').style.display = 'block';

    // Show success message
    const saveStatus = document.getElementById('saveStatus');
    saveStatus.textContent = '‚úÖ Parametry EaaS odblokowane';
    saveStatus.className = 'save-status success';
    setTimeout(() => {
      saveStatus.className = 'save-status';
    }, 3000);
  } else if (password !== null) {
    alert('‚ùå Nieprawid≈Çowe has≈Ço!');
  }
}
</script>

<script src="settings.js"></script>
</body>
</html>
